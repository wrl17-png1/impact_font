<!doctype html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Redactor Bookmarklet Installer</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:2rem}
  a#install{display:inline-block;padding:1rem 1.25rem;border:1px solid #000;border-radius:12px;text-decoration:none}
  .small{margin-top:1rem;font-size:.9rem;color:#555;line-height:1.35}
  textarea{width:100%;height:8rem;margin-top:1rem}
</style>

<h1>Install the Redactor Bookmarklet</h1>
<p><a id="install" href="#">Install Redactor</a></p>
<p class="small">Tip: On iPhone/iPad, long-press the button above and choose <em>Add to Favorites</em> or <em>Add Bookmark</em>. On Android, long-press → <em>Bookmark link</em>.</p>

<!-- The bookmarklet code is stored as plain text to avoid quote-escaping headaches. -->
<script id="bmsrc" type="text/plain">javascript:(()=>{if(window._drawingOverlayActive)return;window._drawingOverlayActive=1;const d=document,ce=t=>d.createElement(t),P=h=>new DOMParser().parseFromString(h,'text/html').body.innerText.trim();Promise.all([fetch('https://wrl17-png1.github.io/impact_font/index.html').then(r=>r.text()),fetch('https://wrl17-png1.github.io/impact_font/index2.html').then(r=>r.text())]).then(([h1,h2])=>{const f1=P(h1),f2=P(h2),s=ce('style');s.textContent='@font-face{font-family:f1;src:url(data:font/ttf;base64,'+f1+")format('truetype')}@font-face{font-family:f2;src:url(data:font/ttf;base64,"+f2+")format('truetype')}.b{font:36px f1,sans-serif;border:0;padding:0;background:#fff}.w{font-family:f2}";d.head.appendChild(s);let c='#fff';const bar=ce('div');bar.style.cssText='position:fixed;bottom:10px;left:50%;transform:translateX(-50%);background:#0000;border:0;border-radius:0;padding:0;z-index:999999;display:flex;gap:0';const b1=ce('button'),b2=ce('button');b1.className='b';b2.className='b w';b1.textContent='Black';b2.textContent='White';b1.onclick=()=>c='#000';b2.onclick=()=>c='#fff';bar.append(b1,b2);d.body.append(bar);const red=()=>{const s=getSelection();if(!s.rangeCount)return;const r=s.getRangeAt(0).getClientRects();for(const x of r){const a=ce('div');a.style.cssText=`position:absolute;left:${x.left+scrollX}px;top:${x.top+scrollY}px;width:${x.width}px;height:${x.height}px;z-index:999998;pointer-events:none;background:${c}`;d.body.append(a)}s.removeAllRanges()};d.ontouchend=red;d.onmouseup=red;});})()</script>

<script>
  // On load, set the real javascript: URL on the link so long-press → "Add Bookmark" preserves it.
  const a = document.getElementById('install');
  const code = document.getElementById('bmsrc').textContent.trim();
  a.href = code;

  // Optional: show a copyable fallback below for manual edits if needed.
  const ta = document.createElement('textarea');
  ta.readOnly = true; ta.value = code;
  document.body.appendChild(ta);
</script>
</html>
